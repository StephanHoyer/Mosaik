=========================
Mosaik - Node Webframework
=========================

NOTICE
======

This is a work in progress and **may change** without any notices.


About
=====

Mosaik is rapid application web framework with node js. It is based on the connect framework. It follows the Model-Action-View principle which is similar to the MVC pattern. The concept is inspired by the great layout processor of the Open source ecommerce solution Magento.

The Framework is based on the idea, that the separation between controller and view isn't as strict as it should be. In most other webframeworks - like Ruby or Django - the controller prepares data for the view by e. G. fetching them from the database (of cause with the help of models). Other parts of the site (like a top menu) which also fetches data of a database does this without any controller. The approach of Mosaik is a little different: there are four main entities:

- Model: plays the same role as in other webframeworks
- Template: same as model
- Block: prepares data for rendering
- Action: contains the "business logic", parses and processes POST data, interacts with models, handles session and so on

Because every request needs other actions, not only the template (and the controller as in other frameworks) is route-specific but also the actions. An action is just a simple function with several parameters like request and response.

Every block that generates output has to contain at least one action which takes the information generated by several actions and generates output.
A second main feature of Mosaik is the layout- or blocktree. Every website contains several blocks such as the header, containing the menu and the loginstate, the main content (e. G. a blogpost) and a footer (containing a search field and a sitemap). Some of these blocks share information, some need data from the db and some other are static an don't need anything more than a template. So every block can depend on a number of middlwares to run before it has all required information to render its content.

Mosik also trys to match with the following princibles:

Reusable Apps
-------------

Every functionality of the project (except of the templates and some configuration) your going to create is contained in a Mosaik-App. Once created, these applications can be used and improved in several projects. They also can be installed and provided to others via NPM, the node package manager. In the near future there will hopefully be a lot of great Mosaik applications to improove your project.

Loose coupling
--------------

The action concept allows Mosaik to be as loosly coupled as you might imagine. It takes two objects, manipulates them,
in most cases thats all. In most cases middlware should consist of only a few lines of code. And they are damn easy to
test. Which brings us to the next point:

Test driven develpoment
-----------------------

The development of Mosaik is completly testdriven, so your applications should also be. Refer to the example
applications to find out, how to test your code.

Don't repeat youself (DRY) and also not others (DRY'n'ANO)
----------------------------------------------------------

Writing the same code over and over again is boring and errorprone. Also time is money, especially for us developers. Mosaik tries to solve this in a number of ways. One example is the concept of multiple requestrelated actions, another one the reusable apps feature.

Getting started
===============

Mac OS X
--------

First install node.js if you aren't already have. One way is to compile it yourself. But the preferable method is to use
a package manager like Homebrew: https://github.com/mxcl/homebrew.

::

    brew install node

After that, you should be able to see the installed version of node using the following command:

::

    node -v
    # v0.4.12

As you may already noticed *mosaik* is not written in plain javascript - it's coffee script. Therefore you need to
install the compiler as well:

::

    brew install coffee-script

    # You may want to use npm for this (-g means global)
    npm install -g coffee-script

The next step is to install the node package manager, simply called *npm*. Unfornatunately there is no way to install
npm using Homebrew at the moment, but there's a handy one liner for this:

::

    curl http://npmjs.org/install.sh | sh

With npm in place you're now able to install the necessary node packages mosaik depends on:

::

    npm install connect

    # Next ones are necessary for unit testing
    npm install expresso
    npm install should

Now it's time to compile to project using coffee-script (from project root):

::

    coffee -c . 

There should be several new javascript files in your project now - one .js file for each .coffee file. To run one of
these scripts its easy as saying:

::

    node FILE.js

To run unit tests, simply use the expresso command:

::

    expresso lib/mosaik.js

    # Or with Growl support
    expresso -g lib/mosaik.js
